<!-- 订单表格单行 - 使用 daisyUI 5 组件 -->
<tr id="order-row-{{.ID}}" class="hover">
    <td>{{.ID}}</td>
    <td class="font-medium">{{.OrderNo}}</td>
    <td>
        <div>
            <div class="font-medium">{{.CustomerName}}</div>
            <div class="text-sm opacity-60">{{.CustomerEmail}}</div>
        </div>
    </td>
    <td class="font-semibold text-error">¥{{printf "%.2f" .TotalAmount}}</td>
    <td>{{.PaymentMethod}}</td>
    <td>
        {{if eq .Status "pending"}}
        <span class="badge badge-warning">待处理</span>
        {{else if eq .Status "paid"}}
        <span class="badge badge-info">已支付</span>
        {{else if eq .Status "shipped"}}
        <span class="badge badge-primary">已发货</span>
        {{else if eq .Status "completed"}}
        <span class="badge badge-success">已完成</span>
        {{else if eq .Status "cancelled"}}
        <span class="badge badge-error">已取消</span>
        {{end}}
    </td>
    <td>{{formatDateTime .CreatedAt}}</td>
    <td>
        <!-- 操作按钮组 - 使用 DaisyUI 5 btn-group -->
        <div class="btn-group btn-group-vertical lg:btn-group-horizontal">
            <!-- 查看详情按钮 - 使用原生 dialog -->
            <button class="btn btn-ghost btn-sm" hx-get="/orders/{{.ID}}" hx-target="#order-modal-content"
                hx-swap="innerHTML" onclick="modal.show('order-modal')" title="查看详情">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                </svg>
                查看
            </button>

            <!-- 状态更新下拉菜单 - 使用 daisyUI 5 dropdown -->
            <div class="dropdown dropdown-end">
                <div tabindex="0" role="button" class="btn btn-ghost btn-sm" title="更新状态">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                    </svg>
                    状态
                </div>
                <ul tabindex="0"
                    class="dropdown-content z-[1] menu p-2 shadow-lg bg-base-100 rounded-box w-40 border border-base-300">
                    <li>
                        <a hx-put="/orders/{{.ID}}/status" hx-vals='{"status": "pending"}'
                            hx-target="#order-row-{{.ID}}" hx-swap="outerHTML">
                            <span class="badge badge-warning badge-xs"></span>
                            待处理
                        </a>
                    </li>
                    <li>
                        <a hx-put="/orders/{{.ID}}/status" hx-vals='{"status": "paid"}' hx-target="#order-row-{{.ID}}"
                            hx-swap="outerHTML">
                            <span class="badge badge-info badge-xs"></span>
                            已支付
                        </a>
                    </li>
                    <li>
                        <a hx-put="/orders/{{.ID}}/status" hx-vals='{"status": "shipped"}'
                            hx-target="#order-row-{{.ID}}" hx-swap="outerHTML">
                            <span class="badge badge-primary badge-xs"></span>
                            已发货
                        </a>
                    </li>
                    <li>
                        <a hx-put="/orders/{{.ID}}/status" hx-vals='{"status": "completed"}'
                            hx-target="#order-row-{{.ID}}" hx-swap="outerHTML">
                            <span class="badge badge-success badge-xs"></span>
                            已完成
                        </a>
                    </li>
                </ul>
            </div>

            <!-- 取消订单按钮 -->
            {{if ne .Status "cancelled"}}
            <button class="btn btn-ghost btn-sm text-error" hx-delete="/orders/{{.ID}}" hx-target="#order-row-{{.ID}}"
                hx-swap="outerHTML swap:300ms" hx-confirm="确定要取消订单【{{.OrderNo}}】吗？" title="取消订单">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
                取消
            </button>
            {{end}}
        </div>
    </td>
</tr>