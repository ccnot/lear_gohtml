<!-- 订单表格单行 - 用于单行更新 -->
<tr id="order-row-{{.ID}}">
    <td>{{.ID}}</td>
    <td><strong>{{.OrderNo}}</strong></td>
    <td>
        <div>
            <div>{{.CustomerName}}</div>
            <small style="color: var(--text-tertiary);">{{.CustomerEmail}}</small>
        </div>
    </td>
    <td style="font-weight: 600; color: var(--error-color);">
        ¥{{printf "%.2f" .TotalAmount}}
    </td>
    <td>{{.PaymentMethod}}</td>
    <td>
        {{if eq .Status "pending"}}
        <span class="badge warning">待处理</span>
        {{else if eq .Status "paid"}}
        <span class="badge info">已支付</span>
        {{else if eq .Status "shipped"}}
        <span class="badge primary">已发货</span>
        {{else if eq .Status "completed"}}
        <span class="badge success">已完成</span>
        {{else if eq .Status "cancelled"}}
        <span class="badge danger">已取消</span>
        {{end}}
    </td>
    <td>{{.CreatedAt.Format "2006-01-02 15:04"}}</td>
    <td>
        <div class="action-buttons">
            <!-- 查看详情按钮 -->
            <button class="btn-icon" hx-get="/orders/{{.ID}}" hx-target="#order-modal-content" hx-swap="innerHTML"
                @click="UIkit.modal('#order-modal').show()" title="查看详情" uk-tooltip>
                <i class="fas fa-eye"></i>
            </button>

            <!-- 状态更新下拉菜单 - 紧凑版 -->
            <div>
                <button class="btn-icon" type="button" title="更新状态" uk-tooltip>
                    <i class="fas fa-edit"></i>
                </button>
                <div uk-dropdown="mode: click; pos: bottom-right; offset: 5" class="order-status-dropdown">
                    <div class="status-dropdown-content">
                        <a href="#" class="status-option" hx-put="/orders/{{.ID}}/status"
                            hx-vals='{"status": "pending"}' hx-target="#order-row-{{.ID}}" hx-swap="outerHTML">
                            <span class="badge warning">待处理</span>
                        </a>
                        <a href="#" class="status-option" hx-put="/orders/{{.ID}}/status" hx-vals='{"status": "paid"}'
                            hx-target="#order-row-{{.ID}}" hx-swap="outerHTML">
                            <span class="badge info">已支付</span>
                        </a>
                        <a href="#" class="status-option" hx-put="/orders/{{.ID}}/status"
                            hx-vals='{"status": "shipped"}' hx-target="#order-row-{{.ID}}" hx-swap="outerHTML">
                            <span class="badge primary">已发货</span>
                        </a>
                        <a href="#" class="status-option" hx-put="/orders/{{.ID}}/status"
                            hx-vals='{"status": "completed"}' hx-target="#order-row-{{.ID}}" hx-swap="outerHTML">
                            <span class="badge success">已完成</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- 取消订单按钮 -->
            {{if ne .Status "cancelled"}}
            <div x-data="deleteConfirm({
                title: '确认取消订单',
                message: '确定要取消订单【{{.OrderNo}}】吗？订单将被标记为已取消状态。',
                confirmText: '确定取消',
                url: '/orders/{{.ID}}',
                target: '#order-row-{{.ID}}'
            })">
                <button class="btn-icon danger" @click="confirmDelete()" title="取消订单" uk-tooltip>
                    <i class="fas fa-times"></i>
                </button>
            </div>
            {{end}}
        </div>
    </td>
</tr>