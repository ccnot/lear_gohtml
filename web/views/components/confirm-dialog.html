<!-- 确认对话框组件 - 使用 Alpine.js + UIKit -->
<div x-data="confirmDialog()" @confirm-dialog.window="show($event.detail)" x-cloak>
    <!-- 遮罩层 -->
    <div x-show="isOpen" x-transition:enter="uk-animation-fade"
        x-transition:leave="uk-animation-fade uk-animation-reverse" class="confirm-dialog-overlay" @click="close()">
    </div>

    <!-- 对话框 -->
    <div x-show="isOpen" x-transition:enter="uk-animation-scale-up" x-transition:leave="uk-animation-scale-down"
        class="confirm-dialog" role="dialog" aria-modal="true">

        <div class="confirm-dialog-content">
            <!-- 图标 -->
            <div class="confirm-dialog-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>

            <!-- 标题 -->
            <h3 class="confirm-dialog-title" x-text="title"></h3>

            <!-- 消息 -->
            <p class="confirm-dialog-message" x-text="message"></p>

            <!-- 按钮组 -->
            <div class="confirm-dialog-buttons">
                <button @click="close()" class="uk-button uk-button-default" type="button">
                    取消
                </button>
                <button @click="confirm()" class="uk-button uk-button-danger" type="button" x-text="confirmText">
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    function confirmDialog() {
        return {
            isOpen: false,
            title: '确认操作',
            message: '您确定要执行此操作吗？',
            confirmText: '确定',
            onConfirm: null,

            show(config) {
                this.title = config.title || '确认操作';
                this.message = config.message || '您确定要执行此操作吗？';
                this.confirmText = config.confirmText || '确定';
                this.onConfirm = config.onConfirm;
                this.isOpen = true;

                // 禁用页面滚动
                document.body.style.overflow = 'hidden';
            },

            close() {
                this.isOpen = false;
                this.onConfirm = null;

                // 恢复页面滚动
                document.body.style.overflow = '';
            },

            confirm() {
                if (this.onConfirm) {
                    this.onConfirm();
                }
                this.close();
            }
        };
    }
</script>

<style>
    [x-cloak] {
        display: none !important;
    }

    .confirm-dialog-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 9998;
        backdrop-filter: blur(2px);
    }

    .confirm-dialog {
        position: fixed;
        inset: 0;
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 16px;
    }

    .confirm-dialog-content {
        background: white;
        border-radius: var(--radius-lg);
        padding: 32px;
        max-width: 400px;
        width: 100%;
        box-shadow: var(--shadow-lg);
        text-align: center;
    }

    .confirm-dialog-icon {
        width: 64px;
        height: 64px;
        margin: 0 auto 24px;
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 32px;
        animation: iconPulse 0.5s ease-out;
    }

    @keyframes iconPulse {
        0% {
            transform: scale(0.8);
            opacity: 0;
        }

        50% {
            transform: scale(1.1);
        }

        100% {
            transform: scale(1);
            opacity: 1;
        }
    }

    .confirm-dialog-title {
        font-size: 24px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 12px;
    }

    .confirm-dialog-message {
        font-size: 14px;
        color: var(--text-secondary);
        margin-bottom: 32px;
        line-height: 1.6;
    }

    .confirm-dialog-buttons {
        display: flex;
        gap: 12px;
        justify-content: center;
    }

    .confirm-dialog-buttons .uk-button {
        min-width: 100px;
        font-weight: 500;
    }
</style>