<!-- 确认对话框组件 - 使用 Alpine.js -->
<div x-data="confirmDialog()" @confirm-dialog.window="show($event.detail)" x-cloak>
    <!-- 遮罩层 -->
    <div x-show="isOpen" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-150"
        x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="confirm-dialog-overlay"
        @click="close()">
    </div>

    <!-- 对话框 -->
    <div x-show="isOpen" x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 transform scale-95" x-transition:enter-end="opacity-100 transform scale-100"
        x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 transform scale-100"
        x-transition:leave-end="opacity-0 transform scale-95" class="confirm-dialog" role="dialog" aria-modal="true">

        <div class="confirm-dialog-content">
            <!-- 图标 -->
            <div class="confirm-dialog-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>

            <!-- 标题 -->
            <h3 class="confirm-dialog-title" x-text="title"></h3>

            <!-- 消息 -->
            <p class="confirm-dialog-message" x-text="message"></p>

            <!-- 按钮组 -->
            <div class="confirm-dialog-buttons">
                <button @click="close()" class="button is-light" type="button">
                    取消
                </button>
                <button @click="confirm()" class="button is-danger" type="button" x-text="confirmText">
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    function confirmDialog() {
        return {
            isOpen: false,
            title: '确认操作',
            message: '您确定要执行此操作吗？',
            confirmText: '确定',
            onConfirm: null,

            show(config) {
                this.title = config.title || '确认操作';
                this.message = config.message || '您确定要执行此操作吗？';
                this.confirmText = config.confirmText || '确定';
                this.onConfirm = config.onConfirm;
                this.isOpen = true;

                // 禁用页面滚动
                document.body.style.overflow = 'hidden';
            },

            close() {
                this.isOpen = false;
                this.onConfirm = null;

                // 恢复页面滚动
                document.body.style.overflow = '';
            },

            confirm() {
                if (this.onConfirm) {
                    this.onConfirm();
                }
                this.close();
            }
        };
    }
</script>

<style>
    [x-cloak] {
        display: none !important;
    }

    .confirm-dialog-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 9998;
        backdrop-filter: blur(2px);
    }

    .confirm-dialog {
        position: fixed;
        inset: 0;
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
    }

    .confirm-dialog-content {
        background: white;
        border-radius: 8px;
        padding: 2rem;
        max-width: 400px;
        width: 100%;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        text-align: center;
    }

    .confirm-dialog-icon {
        width: 64px;
        height: 64px;
        margin: 0 auto 1.5rem;
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 2rem;
        animation: iconPulse 0.5s ease-out;
    }

    @keyframes iconPulse {
        0% {
            transform: scale(0.8);
            opacity: 0;
        }

        50% {
            transform: scale(1.1);
        }

        100% {
            transform: scale(1);
            opacity: 1;
        }
    }

    .confirm-dialog-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: #212121;
        margin-bottom: 0.75rem;
    }

    .confirm-dialog-message {
        font-size: 1rem;
        color: #757575;
        margin-bottom: 2rem;
        line-height: 1.6;
    }

    .confirm-dialog-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
    }

    .confirm-dialog-buttons .button {
        min-width: 100px;
        font-weight: 600;
    }
</style>