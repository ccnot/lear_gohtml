<!-- 系统设置页面 -->
<div class="space-y-6">
    <!-- 页面标题 - 使用 hx-swap-oob 更新顶部标题 -->
    <div id="page-title" hx-swap-oob="true">系统设置</div>

    <!-- 系统配置卡片 -->
    <div class="card bg-base-100 shadow-sm border border-base-300">
        <div class="card-body">
          
            <!-- 设置表单 -->
            <form hx-post="/settings" hx-target="#settings-form-container" hx-swap="innerHTML" x-data="settingsForm()"
                @submit.prevent="submitForm">

                <div id="settings-form-container">
                    <!-- Tab 导航 -->
                    <div x-data="{ activeTab: 'basic' }">
                        <div class="tabs tabs-boxed">
                            <a class="tab tab-lg" :class="{ 'tab-active': activeTab === 'basic' }"
                                @click.prevent="activeTab = 'basic'">
                                <i class="fas fa-info-circle mr-2"></i>
                                基本信息
                            </a>
                            <a class="tab tab-lg" :class="{ 'tab-active': activeTab === 'contact' }"
                                @click.prevent="activeTab = 'contact'">
                                <i class="fas fa-address-book mr-2"></i>
                                联系方式
                            </a>
                            <a class="tab tab-lg" :class="{ 'tab-active': activeTab === 'regional' }"
                                @click.prevent="activeTab = 'regional'">
                                <i class="fas fa-globe mr-2"></i>
                                区域设置
                            </a>
                        </div>

                        <!-- Tab 内容 -->
                        <div class="mt-6">
                            <!-- 基本信息 Tab -->
                            <div x-show="activeTab === 'basic'" x-transition>
                                <fieldset class="fieldset bg-base-200 border-base-300 rounded-lg p-6">
                                    <legend class="fieldset-legend text-lg font-semibold">
                                        <i class="fas fa-info-circle mr-2"></i>基本信息
                                    </legend>

                                    <div class="space-y-6">
                                        <div class="form-control">
                                            <label class="label">
                                                <span class="label-text font-medium">网站名称</span>
                                                <span class="label-text-alt text-error">*</span>
                                            </label>
                                            <div class="join">
                                                <span class="join-item bg-base-300 border border-base-300 px-3 flex items-center text-sm rounded-l-lg">
                                                    <i class="fas fa-pencil opacity-70"></i>
                                                </span>
                                                <input type="text"
                                                    name="site_name"
                                                    placeholder="请输入网站名称"
                                                    value="{{.SiteName}}"
                                                    required
                                                    class="input input-bordered input-sm flex-1 join-item rounded-r-lg peer">
                                            </div>
                                            <label class="label">
                                                <span class="label-text-alt text-info">网站在浏览器标题栏显示的名称</span>
                                            </label>
                                        </div>

                                        <div class="form-control">
                                            <label class="label">
                                                <span class="label-text font-medium">网站描述</span>
                                            </label>
                                            <div class="join join-vertical">
                                                <span class="join-item bg-base-300 border border-base-300 px-3 flex items-center text-sm rounded-t-lg">
                                                    <i class="fas fa-align-left opacity-70"></i>
                                                </span>
                                                <textarea name="site_description"
                                                    placeholder="请输入网站描述，简要说明网站的功能和用途"
                                                    rows="3"
                                                    class="textarea textarea-bordered textarea-sm flex-1 join-item rounded-b-lg resize-none peer">{{.SiteDescription}}</textarea>
                                            </div>
                                            <label class="label">
                                                <span class="label-text-alt text-info">用于 SEO 优化和网站简介</span>
                                            </label>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>

                            <!-- 联系方式 Tab -->
                            <div x-show="activeTab === 'contact'" x-transition>
                                <fieldset class="fieldset bg-base-200 border-base-300 rounded-lg p-6">
                                    <legend class="fieldset-legend text-lg font-semibold">
                                        <i class="fas fa-address-book mr-2"></i>联系方式
                                    </legend>

                                    <div class="space-y-6">
                                        <div class="form-control">
                                            <label class="label">
                                                <span class="label-text font-medium">联系邮箱</span>
                                                <span class="label-text-alt text-error">*</span>
                                            </label>
                                            <div class="join">
                                                <span class="join-item bg-base-300 border border-base-300 px-3 flex items-center text-sm rounded-l-lg">
                                                    <i class="fas fa-envelope opacity-70"></i>
                                                </span>
                                                <input type="email"
                                                    name="contact_email"
                                                    placeholder="admin@example.com"
                                                    value="{{.ContactEmail}}"
                                                    required
                                                    class="input input-bordered input-sm flex-1 join-item rounded-r-lg peer">
                                            </div>
                                            <label class="label">
                                                <span class="label-text-alt text-info">用于接收系统通知和用户联系</span>
                                            </label>
                                        </div>

                                        <div class="form-control">
                                            <label class="label">
                                                <span class="label-text font-medium">联系电话</span>
                                            </label>
                                            <div class="join">
                                                <span class="join-item bg-base-300 border border-base-300 px-3 flex items-center text-sm rounded-l-lg">
                                                    <i class="fas fa-phone opacity-70"></i>
                                                </span>
                                                <input type="tel"
                                                    name="contact_phone"
                                                    placeholder="400-123-4567"
                                                    value="{{.ContactPhone}}"
                                                    class="input input-bordered input-sm flex-1 join-item rounded-r-lg peer">
                                            </div>
                                            <label class="label">
                                                <span class="label-text-alt text-info">客服或技术支持热线</span>
                                            </label>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>

                            <!-- 区域设置 Tab -->
                            <div x-show="activeTab === 'regional'" x-transition>
                                <fieldset class="fieldset bg-base-200 border-base-300 rounded-lg p-6">
                                    <legend class="fieldset-legend text-lg font-semibold">
                                        <i class="fas fa-globe mr-2"></i>区域设置
                                    </legend>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div class="form-control">
                                            <label class="label">
                                                <span class="label-text font-medium">货币</span>
                                                <span class="label-text-alt text-error">*</span>
                                            </label>
                                            <div class="join">
                                                <span class="join-item bg-base-300 border border-base-300 px-3 flex items-center text-sm rounded-l-lg">
                                                    <i class="fas fa-coins opacity-70"></i>
                                                </span>
                                                <select name="currency" required class="select select-bordered select-sm flex-1 join-item rounded-r-lg peer">
                                                    <option value="">选择货币</option>
                                                    <option value="CNY" {{if eq .Currency "CNY" }}selected{{end}}>人民币 (¥)</option>
                                                    <option value="USD" {{if eq .Currency "USD" }}selected{{end}}>美元 ($)</option>
                                                    <option value="EUR" {{if eq .Currency "EUR" }}selected{{end}}>欧元 (€)</option>
                                                    <option value="GBP" {{if eq .Currency "GBP" }}selected{{end}}>英镑 (£)</option>
                                                    <option value="JPY" {{if eq .Currency "JPY" }}selected{{end}}>日元 (¥)</option>
                                                </select>
                                            </div>
                                            <label class="label">
                                                <span class="label-text-alt text-info">商品价格显示的货币单位</span>
                                            </label>
                                        </div>

                                        <div class="form-control">
                                            <label class="label">
                                                <span class="label-text font-medium">时区</span>
                                                <span class="label-text-alt text-error">*</span>
                                            </label>
                                            <div class="join">
                                                <span class="join-item bg-base-300 border border-base-300 px-3 flex items-center text-sm rounded-l-lg">
                                                    <i class="fas fa-clock opacity-70"></i>
                                                </span>
                                                <select name="timezone" required class="select select-bordered select-sm flex-1 join-item rounded-r-lg peer">
                                                    <option value="">选择时区</option>
                                                    <option value="Asia/Shanghai" {{if eq .Timezone "Asia/Shanghai" }}selected{{end}}>亚洲/上海 (GMT+8)</option>
                                                    <option value="Asia/Singapore" {{if eq .Timezone "Asia/Singapore" }}selected{{end}}>亚洲/新加坡 (GMT+8)</option>
                                                    <option value="Asia/Tokyo" {{if eq .Timezone "Asia/Tokyo" }}selected{{end}}>亚洲/东京 (GMT+9)</option>
                                                    <option value="America/New_York" {{if eq .Timezone "America/New_York" }}selected{{end}}>美国/纽约 (GMT-5)</option>
                                                    <option value="Europe/London" {{if eq .Timezone "Europe/London" }}selected{{end}}>欧洲/伦敦 (GMT+0)</option>
                                                </select>
                                            </div>
                                            <label class="label">
                                                <span class="label-text-alt text-info">系统时间显示的时区</span>
                                            </label>
                                        </div>

                                        <div class="form-control">
                                            <label class="label">
                                                <span class="label-text font-medium">语言</span>
                                                <span class="label-text-alt text-error">*</span>
                                            </label>
                                            <div class="join">
                                                <span class="join-item bg-base-300 border border-base-300 px-3 flex items-center text-sm rounded-l-lg">
                                                    <i class="fas fa-language opacity-70"></i>
                                                </span>
                                                <select name="language" required class="select select-bordered select-sm flex-1 join-item rounded-r-lg peer">
                                                    <option value="">选择语言</option>
                                                    <option value="zh-CN" {{if eq .Language "zh-CN" }}selected{{end}}>简体中文</option>
                                                    <option value="zh-TW" {{if eq .Language "zh-TW" }}selected{{end}}>繁体中文</option>
                                                    <option value="en-US" {{if eq .Language "en-US" }}selected{{end}}>English (US)</option>
                                                    <option value="ja-JP" {{if eq .Language "ja-JP" }}selected{{end}}>日本語</option>
                                                </select>
                                            </div>
                                            <label class="label">
                                                <span class="label-text-alt text-info">管理界面显示语言</span>
                                            </label>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>

                        <!-- 提交按钮 -->
                        <div class="flex justify-end mt-8 pt-6 border-t border-base-300">
                            <!-- 使用 DaisyUI 5 btn-group -->
                            <div class="btn-group">
                                <button type="button" class="btn btn-ghost" onclick="location.reload()">
                                    <i class="fas fa-undo"></i>
                                    重置
                                </button>
                                <button type="submit" class="btn btn-primary" :disabled="loading">
                                    <span x-show="loading" class="loading loading-spinner loading-sm"></span>
                                    <i class="fas fa-save" x-show="!loading"></i>
                                    保存设置
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- 危险操作区域 -->
    <div class="card bg-base-100 shadow-sm border border-base-300">
        <div class="card-body">
            <h3 class="card-title text-lg font-medium flex items-center gap-2 mb-4">
                <i class="fas fa-exclamation-triangle text-error"></i>
                危险操作
            </h3>

            <div class="alert alert-warning mb-4">
                <div class="flex items-start gap-2">
                    <i class="fas fa-exclamation-triangle flex-shrink-0 mt-0.5"></i>
                    <span>以下操作可能会影响系统运行，请谨慎操作。</span>
                </div>
            </div>

            <!-- 使用 DaisyUI 5 btn-group -->
            <div class="btn-group">
                <button class="btn btn-warning" @click="if(confirm('确定要清除缓存吗？')) { alert('缓存已清除（模拟操作）') }">
                    <i class="fas fa-broom"></i>
                    清除缓存
                </button>
                <button class="btn btn-error" @click="if(confirm('确定要重置所有设置吗？此操作不可恢复！')) { alert('设置已重置（模拟操作）') }">
                    <i class="fas fa-exclamation-circle"></i>
                    重置所有设置
                </button>
            </div>
        </div>
    </div>
</div>
