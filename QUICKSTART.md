# 快速启动指南

## 启动项目

1. **确保环境**
   - Go 1.16+ 已安装
   - 端口 8000 未被占用

2. **下载依赖**
```bash
go mod download
```

3. **运行项目**
```bash
go run main.go
```

4. **访问应用**
   - 打开浏览器访问: http://localhost:8000
   - 默认会看到管理后台的主界面

## 功能导航

### 仪表盘
- URL: http://localhost:8000/dashboard
- 查看统计数据、最近订单、用户和热门商品
- 统计卡片每 30 秒自动刷新

### 用户管理
- URL: http://localhost:8000/users
- 功能：
  - ✅ 搜索用户（实时搜索，延迟 500ms）
  - ✅ 按状态筛选（活跃/非活跃）
  - ✅ 新增用户（点击"新增用户"按钮）
  - ✅ 编辑用户（点击表格中的编辑按钮）
  - ✅ 删除用户（点击删除按钮，会有确认对话框）
  - ✅ 分页浏览（每页 10 条）

### 商品管理
- URL: http://localhost:8000/products
- 功能：
  - ✅ 搜索商品（实时搜索）
  - ✅ 按分类筛选
  - ✅ 卡片式展示
  - ✅ 新增/编辑/删除商品
  - ✅ 分页浏览（每页 12 条）

### 订单管理
- URL: http://localhost:8000/orders
- 功能：
  - ✅ 搜索订单（订单号、客户名称）
  - ✅ 按状态筛选
  - ✅ 查看订单详情（点击眼睛图标）
  - ✅ 更新订单状态（点击编辑图标，选择新状态）
  - ✅ 取消订单
  - ✅ 分页浏览（每页 10 条）

### 系统设置
- URL: http://localhost:8000/settings
- 功能：
  - ✅ 基本信息配置
  - ✅ 联系方式设置
  - ✅ 区域设置（货币、时区、语言）
  - ✅ Tab 切换浏览
  - ✅ 保存设置

## HTMX 特性演示

### 1. 实时搜索
在用户管理或商品管理页面的搜索框中输入关键词，系统会在你停止输入 500ms 后自动搜索。

**实现原理**:
```html
hx-get="/users"
hx-trigger="keyup changed delay:500ms"
```

### 2. 定时刷新
在仪表盘页面，统计卡片每 30 秒自动刷新一次。

**实现原理**:
```html
hx-get="/dashboard/stats"
hx-trigger="every 30s"
```

### 3. 单行/单卡更新
编辑用户或商品时，保存后只会更新对应的那一行或卡片，不会刷新整个列表。

**实现原理**:
```html
hx-put="/users/{{.ID}}"
hx-target="#user-row-{{.ID}}"
hx-swap="outerHTML"
```

### 4. 模态框表单
点击"新增用户"或"编辑"按钮时，表单会在模态框中动态加载。

**实现原理**:
```html
hx-get="/users/new"
hx-target="#modal-content"
hx-swap="innerHTML"
```

### 5. 状态更新
在订单管理页面，可以通过下拉菜单快速更新订单状态。

**实现原理**:
```html
hx-put="/orders/{{.ID}}/status"
hx-vals='{"status": "paid"}'
```

### 6. Toast 通知
执行操作（新增、编辑、删除）后，会在右上角显示成功或失败的通知。

**实现原理**:
服务器返回特殊的 HTTP Header，前端 JavaScript 监听并显示通知：
```go
c.Worker.IrisContext().Header("X-Toast-Message", "操作成功")
c.Worker.IrisContext().Header("X-Toast-Type", "success")
```

### 7. SPA 导航
点击侧边栏菜单时，只更新主内容区域，不刷新整个页面，且浏览器地址栏会更新。

**实现原理**:
```html
hx-get="/dashboard"
hx-target="#main-container"
hx-push-url="true"
```

## Alpine.js 特性演示

### 1. 模态框控制
模态框的打开和关闭由 Alpine.js 控制。

### 2. 下拉菜单
顶部栏的通知和用户菜单使用 Alpine.js 实现。

### 3. Tab 切换
系统设置页面的标签页切换。

### 4. 表单验证
表单提交前的客户端验证。

### 5. 确认对话框
删除操作前的确认提示。

## Mock 数据说明

所有数据都是内存中的 mock 数据：

- **用户**: 50 个模拟用户
- **商品**: 30 个模拟商品
- **订单**: 30 个模拟订单
- **设置**: 一组默认设置

⚠️ **注意**: 重启应用后，所有修改的数据都会丢失。

## 常见问题

### Q: 为什么重启后数据丢失了？
A: 这是学习项目，使用内存中的 mock 数据，没有连接真实数据库。

### Q: 如何连接真实数据库？
A: 需要：
1. 在 `main.go` 中启用 `installDatabase()` 函数
2. 配置 `config/config.toml` 中的数据库连接
3. 在各个控制器中替换 mock 数据为真实的数据库操作

### Q: 为什么有些功能没有实现？
A: 这是一个学习项目，重点在于展示 HTMX 的用法，而不是完整的生产系统。

### Q: 可以用于生产环境吗？
A: 不建议。需要添加：
- 用户认证和授权
- 数据验证和安全检查
- 真实的数据持久化
- 错误处理和日志
- 性能优化
- 测试覆盖

## 下一步

1. **阅读代码**: 从 `adapter/controller/` 开始，理解控制器的实现
2. **查看视图**: 查看 `web/views/` 中的 HTML 模板，理解 HTMX 的使用
3. **实验修改**: 尝试修改代码，添加新功能
4. **阅读文档**: 查看 HTMX、Bulma 和 Alpine.js 的官方文档

## 学习路径建议

1. **初级**: 理解 SPA 架构和 HTMX 的基本用法
2. **中级**: 学习表单提交、验证和错误处理
3. **高级**: 实现复杂的交互，如批量操作、拖拽排序等

## 获取帮助

- 查看 [PROJECT_GUIDE.md](./PROJECT_GUIDE.md) 获取详细说明
- 阅读代码中的中文注释
- 查看 [HTMX 官方文档](https://htmx.org/)

---

**祝学习愉快！** 🎉

